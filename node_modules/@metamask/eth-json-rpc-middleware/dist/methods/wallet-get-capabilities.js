"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.walletGetCapabilities = void 0;
const rpc_errors_1 = require("@metamask/rpc-errors");
const superstruct_1 = require("@metamask/superstruct");
const utils_1 = require("@metamask/utils");
const validation_1 = require("../utils/validation");
const GetCapabilitiesStruct = (0, superstruct_1.tuple)([
    utils_1.HexChecksumAddressStruct,
    (0, superstruct_1.optional)((0, superstruct_1.array)(utils_1.StrictHexStruct)),
]);
async function walletGetCapabilities(req, res, { getAccounts, getCapabilities, }) {
    if (!getCapabilities) {
        throw rpc_errors_1.rpcErrors.methodNotSupported();
    }
    (0, validation_1.validateParams)(req.params, GetCapabilitiesStruct);
    const address = req.params[0];
    const chainIds = req.params[1];
    await (0, validation_1.validateAndNormalizeKeyholder)(address, req, {
        getAccounts,
    });
    const capabilities = await getCapabilities(address, chainIds, req);
    res.result = capabilities;
}
exports.walletGetCapabilities = walletGetCapabilities;
//# sourceMappingURL=wallet-get-capabilities.js.map